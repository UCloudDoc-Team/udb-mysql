# 公有云 MySQL 外网访问功能说明文档

## 功能简介

公有云 MySQL 支持通过公网访问数据库实例。当业务需要从云外网络（如办公网络、本地数据中心、互联网等）访问数据库时，可开启外网访问，并通过白名单、带宽控制等配置保障数据安全与访问性能。

该功能适用于：

- 本地 IDC / 企业办公网络访问云上 MySQL
- 跨云环境数据库访问
- 临时运维排查/外部系统数据接入

> **提示**：开启外网访问会暴露数据库到公网，为减少安全风险，请务必配置访问白名单。

---

## 功能模块

- 开启 / 关闭外网访问
- 管理访问白名单
- 配置公网带宽
- 查看公网连接信息（外网地址/端口/带宽/白名单）

---

## 开启外网访问

### 步骤

1. 登录云控制台
2. 进入 **MySQL 实例管理**
3. 选择目标实例
4. 点击 **详情 > 数据库连接**
5. 打开 **启用外网访问**
6. 设置公网带宽
7. 配置访问白名单

![image](/images/开启外网.png)

### 说明

| 参数 | 描述 |
|------|------|
| 外网地址 | 为实例分配公网域名 |
| 带宽 | 控制公网访问速度 |
| 白名单 | 控制可访问的来源 IP/网段。刚开启外网访问时，白名单为空，全不放行规则 |

### 域名及端口规则
1. 域名格式为：\<随机字符串\>.mysql.\<region\>.internet.ucloudcs.com

2. 端口初始随机生成，后续可以在**详情 > 数据库连接**进行修改


---

## 关闭外网访问

关闭外网访问会立即禁用所有公网连接。

### 步骤

1. 点击**数据库详情页 > 数据库连接**
2. 关闭 **外网访问开关**

![image](/images/关闭外网.png)

>  公网 IP/域名将释放  
>  内网访问不受影响  
>  外部应用将断开连接  
>  关闭外网访问后再次开启，域名可能会发生变化

---

## 修改端口


### 步骤

1. 点击**数据库详情页 > 数据库连接**
![image](/images/修改端口01.png)
2. 编辑 **端口**
![image](/images/修改端口02.png)
3. 确定



---


## 修改白名单

白名单规则用于限制哪些公网 IP 可访问 MySQL 实例。

### 支持格式

- 单 IP：`1.2.3.4`
- CIDR：`10.0.0.0/24`
- 多条规则可同时设置

### 步骤

1. 点击**数据库详情页 > 数据库连接**
![image](/images/修改白名单01.png)
2. 编辑 **白名单**
![image](/images/修改白名单02.png)
3. 确定


---

## 修改公网带宽

带宽影响公网访问吞吐能力与性能。

### 步骤

1. 点击**数据库详情页 > 数据库连接**
![image](/images/修改带宽01.png)
2. 编辑 **带宽**
![image](/images/修改带宽02.png)
3. 调整数值并购买

### 带宽说明


带宽调整范围 : 1–5 Mbps 


>  支持在线调整，无需重启实例

---


---

## 示例命令

MySQL 客户端连接：

```bash
mysql -h udbha-xxxxx.mysql.cn-bj2.internet.ucloudcs.com -P 55945 -u root -p
